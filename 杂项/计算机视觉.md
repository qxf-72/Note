# 线性滤波

进行线性滤波的目的：**图像去噪**

**卷积的定义**

<center>
<img src="https://picture-in-md.oss-cn-guangzhou.aliyuncs.com/2024-07-01_082333.jpg" width="500" />
</center>


**卷积运算性质**
- 线性： $filter(f_1+f_2)=filter(f_1)+filter(f_2$ )
- 平移不变性
- 交换律
- 结合律
- 分配律：与+法的分配律


**Padding 的方法**
- 填 0（深度学习常用）
- 把对边的边缘复制过来填充
- 把当前边边缘复制过来填充
- 把当前边边缘进行镜像之后填充

<br/>


**锐化**

锐化滤波器通过增强图像中的**高频分量**来达到增强边缘和细节的效果。平滑操作会去除图像中的高频成分（细节和噪声），留下低频成分（平滑部分）。因此，原图 减去 平滑后的图像就等于原图的高频成分，即细节和噪声。

此时原图叠加上细节图便得到锐化图像，锐化卷积核为 $2*e-g$ 。

$$
I+I*(e-g)=I*(2e-g)
$$


<br/>



**高斯卷积核**

使用均值滤波卷积核会出现振铃现象，解决方法是使用高斯卷积核：

$$
G_{\sigma}=\frac{1}{2\pi \sigma ^2}e^{-\frac{\left( x^2+y^2 \right)}{2\sigma ^2}}
$$

$\sigma$ 标准差越大，平滑效果越明显，根据 $3\sigma$ 原则，一般把**卷积核窗宽设置为 $6\sigma+1$ ** 。


<br/>


**高斯卷积核性质**
- 高斯卷积核是低通滤波器，过滤高频信号。
- 高斯卷积核之间进行卷积结果为高斯卷积核： $((I*ag)*bg)=I*\sqrt{a^2+b^2}$
- **可分解**：二维高斯卷积核可以分解两个一维高斯卷积核，**加速运算**。对于高斯卷积核，这种分解是**完全等价**的。

<center>
<img src="https://picture-in-md.oss-cn-guangzhou.aliyuncs.com/2024-07-01_084851.jpg" width="600" />
</center>



<br/>


**噪声**

- 椒盐噪声：随机的黑、白像素。
- 脉冲噪声：随机的白像素分布。
- 高斯噪声：每个像素点的灰度值产生偏差，偏差值符合正态分布。

对于 $\sigma$ 较大的高斯噪声，采用 $\sigma$ 较大的模板卷积。

对于椒盐噪声采用中值滤波。

---


<br/>

<br/>

<br/>

<br/>



# 边缘检测

图像的边缘部分灰度变化剧烈，使用卷积模拟求导运算，然后使用卷积核识别边缘。

**不同的卷积核**
- Prewitt：对单点噪声不敏感
- Sobel：先平滑后求导
- Roberts：检测 45 °和 135°方向的边缘

<center>
<img src="https://picture-in-md.oss-cn-guangzhou.aliyuncs.com/2024-07-01_092055.jpg" width="500" />
</center>


<br/>

**图像梯度**

求取 x 和 y 方向的偏导后，得到图像梯度，其指向信号变化最大的方向和边缘垂直。两个偏导值平方 求和 开根号 得到**幅值**。

<br/>


**噪声的影响**

<center>
<img src="https://picture-in-md.oss-cn-guangzhou.aliyuncs.com/2024-07-01_092816.jpg" width="500" />
</center>

解决方法——先高斯平滑，后求偏导。得到**高斯偏导模板**。


<br/>

## Canny 边缘提取算法

算法流程：
- 高斯偏导模板预处理
- 得到幅值图和梯度方向
- **非极大值抑制**
- 双阈值处理
	- 设定两个阈值，大于高阈值的一定是边缘，小于低阈值的一定不是边缘。对于处在两者之间的点，只有和高阈值确定出来的边缘有连接才认为是边缘的一部分（滞后跟踪边界）。


---


<br/>


<br/>


<br/>


<br/>


# 拟合

拟合通常用于从数据中提取有意义的模式或特征，并在此基础上进行推断或预测。常见的拟合任务包括曲线拟合、直线拟合等。

## 最小二乘线性拟合

**假定所有点都是有效点**。使用样本点与直线垂直方向上的距离评估拟合的直线的效果。
- 不具有旋转不变性
- 不能用于拟合垂直的直线

<center>
<img src="https://picture-in-md.oss-cn-guangzhou.aliyuncs.com/2024-07-01_094115.jpg" width="600" />
</center>


为了解决以上缺点，使用**总体最小二乘法**拟合直线。使用样本点到直线的距离进行评估，同时需要改变直线的表达方式 $ax+by=d$ 。

最优解为 $d=a\bar{x}+b\bar{y}$ ，代入方程，得到$N=\left[ \begin{array}{c}
	a\\
	b\\
\end{array} \right]$ 的最优解为 $U^TU$ 的最小特征值 对应的特征向量。

<center>
<img src="https://picture-in-md.oss-cn-guangzhou.aliyuncs.com/2024-07-01_094746.jpg" width="600" />
</center>


**鲁棒估计**

最小二乘法法假定所有点都位于直线上，但是如果存在外点，会让拟合的直线产生很大的偏差。可以在 对距离乘以一个系数：

$$
\rho \left( u;\sigma \right) =\frac{u^2}{\sigma ^2+u^2}
$$

- 此时不再是一个线性的变换，需要使用迭代法求解。
- $\sigma$ 一般取 $1.5$ 倍的残差。



## RANSAC

鲁棒估计能处理存在一些外点的情况，但是如果存在很多外点。